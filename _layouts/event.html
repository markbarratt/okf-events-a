<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang }}">

<head>
  {% if site.google_analytics %}
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', '{{ site.google_analytics }}');
  </script>
  {% endif %}
  <meta charset="UTF-8">
  <script src="{{ site.baseurl }}/assets/js/papaparse.js"></script>
  {% seo %}
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Bootstrap only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">

  <link rel="shortcut icon" href="{{ site.baseurl }}/favicon.ico">
</head>

<body>
  <a id="skip-to-content" href="#content">Skip to the content.</a>

  {% include header.html %}

  <div id="content" class="container main" role="main">
    <div class="row">
      <div class="col-1">
      </div>
      <div class="col-10">
        <h5 class="event-okf-strapline">A course from Open Knowledge Foundation</h5>
        <!-- event title -->
        <h2 id="event_title"></h2>   

        {% if page.series %}
          <h5 class="series-title">An event in the <span class="series"><a href="{{ site.baseurl }}{{ page.serieslink }}"><span>{{ page.series }}</span></a></span> series</h5>
        {% endif %}
        
        <!-- livestream link -->
        <div id="event_livestream_show" class="my-4">
          <h5>Livestream available at <span id="event_livestream"></span></h5>
        </div>

        <!-- info panel -->
        <div class="row event-details-key-info-panel">
          <div class="row event-details-title">{{site.data.translations['keyInformation'][page.lang]}}</div>
          <div class="col-3 event-details-key-info-panel-text-left">
            <div class="row">{{site.data.translations['date'][page.lang]}}</div>
            <div class="row">{{site.data.translations['time'][page.lang]}}</div>
            <div class="row">{{site.data.translations['location'][page.lang]}}</div>
            <div class="row">{{site.data.translations['eventLanguage'][page.lang]}}</div>
            <div class="row">{{site.data.translations['costs'][page.lang]}}</div>
            <div class="row">{{site.data.translations['organiser'][page.lang]}}</div>
            <div class="row">{{site.data.translations['childcare'][page.lang]}}</div>
            <div class="row">{{site.data.translations['access'][page.lang]}}</div>
          </div>
          <div class="col-9 event-details-key-info-panel-text-right">
            <div class="row">
              <div class="">
                <span id="event_startdate"></span>
                <span id="event_enddateshow"><span> to </span><span id="event_enddate"></span>
                </span>
              </div>
            </div>
            <div class="row"><span id="event_time"></span></div>
            <div class="row"><span id="event_location"></span></div>
            <div class="row"><span id="event_language"></span></div>
            <div class="row"><span id="event_costs"></span></div>
            <div class="row"><span id="event_organiser"></span></div>
            <div class="row"><span id="event_childcare"></span></div>
            <div class="row"><span id="event_access"></span></div>
          </div>
        </div>
        <br>

        <!-- event summary -->
        <div id="event_summary_show" class="mt-2 mb-4 before-event">
          <div id="event_summary"></div>
        </div>

        <!-- pre, during, post training -->
        <br>
        <div class="accordion" id="event_accordion">
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingZero">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseZero" aria-expanded="false" aria-controls="panelsStayOpen-collapseZero">
                <h3 class="event-details-h3">{{site.data.translations['aboutTheEvent'][page.lang]}}</h3>
              </button>
            </h2>
            <div id="panelsStayOpen-collapseZero" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingZero">
              <div class="accordion-body">
                <!-- about the event -->
                <div id="event_about_show">
                  <p id="event_about"></p>
                </div>

                <h4><strong>{{site.data.translations['codeOfConduct'][page.lang]}}</strong></h4>
                <p>{{site.data.translations['governance1'][page.lang]}} <a
                  href="https://okfn.org/about/code-of-conduct/">{{site.data.translations['codeOfConduct'][page.lang]}}</a>. {{site.data.translations['governance2'][page.lang]}}.</p>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingOne">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="false" aria-controls="panelsStayOpen-collapseOne">
                <h3 class="event-details-h3">{{site.data.translations['eventPreparation'][page.lang]}}</h3>
              </button>
            </h2>
            <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingOne">
              <div class="accordion-body">
                <div id="event_presurvey_show"><h4><strong>{{site.data.translations['preTrainingSurveys'][page.lang]}}</strong></h4><p id="event_presurvey"></p></div>
                <div id="event_preparation_show"><p id="event_preparation"></p></div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
                <h3 class="event-details-h3 pt-1">{{site.data.translations['atTheEvent'][page.lang]}}</h3>
              </button>
            </h2>
            <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
              <div class="accordion-body">
                <div id="event_agenda_show"><h4><strong>{{site.data.translations['agenda'][page.lang]}}</strong></h4><p id="event_agenda"></p></div>
                <div id="event_structure_show"><p id="event_structure"></p></div>
                <div id="event_materials_show"><p id="event_materials"></p></div>
                <div id="event_during_show"><p id="event_during"></p></div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingThree">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="true" aria-controls="panelsStayOpen-collapseThree">
                <h3 class="event-details-h3">{{site.data.translations['eventRetrospective'][page.lang]}}</h3>
              </button>
            </h2>
            <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingThree">
              <div class="accordion-body">
                <div id="event_resources_show"><h4><strong>{{site.data.translations['learningResources'][page.lang]}}</strong></h4><p id="event_resources"></p></div>
                <div id="event_outputs_show"><h4><strong>{{site.data.translations['eventOutputs'][page.lang]}}</strong></h4><p id="event_outputs"></p></div>
                <div id="event_retrospective_show"><p id="event_retrospective"></p></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  {% include footer.html %}
</body>

<script type='text/javascript'>
  var publicSpreadsheetUrl = '{{ page.publicSpreadsheetUrl }}';
  
  function init() {
    Papa.parse(publicSpreadsheetUrl, {
      download: true,
      header: true,
      complete: showInfo
    })
  }
  
  function showInfo(results) {
    let data = results.data
    data.forEach(function (data) {
      // dates transferred as text: need as dates to be evaluated in front-page listing for ordering events

      // event title
      event_title.innerHTML = data.event_title;

      // livestream link
      if (data.event_livestream_show == "TRUE") {
        event_livestream.innerHTML = data.event_livestream
      }
      else {
        document.getElementById("event_livestream_show").style.display = "none";
      }

      // info panel
      event_startdate.innerHTML = data.event_startdate;
      if (data.event_enddate > "") {
        event_enddate.innerHTML = data.event_enddate;
      } else {
        document.getElementById("event_enddateshow").style.display = "none";
      }
      event_time.innerHTML = data.event_time;
      event_location.innerHTML = data.event_location;
      event_language.innerHTML = data.event_language;
      event_costs.innerHTML = data.event_costs;
      event_organiser.innerHTML = data.event_organiser;
      event_childcare.innerHTML = data.event_childcare;
      event_access.innerHTML = data.event_access;

      // event summary
      if (data.event_summary_show == "TRUE") {
        event_summary.innerHTML = data.event_summary;
      }
      else {
        document.getElementById("event_summary_show").style.display = "none";
      }

      // about the event
      if (data.event_about_show == "TRUE") {
        event_about.innerHTML = data.event_about;
      }
      else {
        document.getElementById("event_about_show").style.display = "none";
      }

      // pre, during, post training
      if (data.event_presurvey_show == "TRUE") {
        event_presurvey.innerHTML = data.event_presurvey;
      }
      else {
        document.getElementById("event_presurvey_show").style.display = "none";
      }

      if (data.event_preparation_show == "TRUE") {
        event_preparation.innerHTML = data.event_preparation;
      }
      else {
        document.getElementById("event_preparation_show").style.display = "none";
      }

      if (data.event_agenda_show == "TRUE") {
        event_agenda.innerHTML = data.event_agenda;
      }
      else {
        document.getElementById("event_agenda_show").style.display = "none";
      }

      if (data.event_structure_show == "TRUE") {
        event_structure.innerHTML = data.event_structure;
      }
      else {
        document.getElementById("event_structure_show").style.display = "none";
      }

      if (data.event_materials_show == "TRUE") {
        event_materials.innerHTML = data.event_materials;
      }
      else {
        document.getElementById("event_materials_show").style.display = "none";
      }

      if (data.event_during_show == "TRUE") {
        event_during.innerHTML = data.event_during;
      }
      else {
        document.getElementById("event_during_show").style.display = "none";
      }

      if (data.event_resources_show == "TRUE") {
        event_resources.innerHTML = data.event_resources;
      }
      else {
        document.getElementById("event_resources_show").style.display = "none";
      }

      if (data.event_outputs_show == "TRUE") {
        event_outputs.innerHTML = data.event_outputs;
      }
      else {
        document.getElementById("event_outputs_show").style.display = "none";
      }

      if (data.event_retrospective_show == "TRUE") {
        event_retrospective.innerHTML = data.event_retrospective;
      }
      else {
        document.getElementById("event_retrospective_show").style.display = "none";
      }
    });
  }
  
  window.addEventListener('DOMContentLoaded', init)
</script>

<!-- Bootstrap JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

</html>